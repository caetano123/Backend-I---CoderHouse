<!-- 游댳 Bot칩n Inicio -->
<div class="top-bar">
  <button onclick="window.location.href='/'" class="btn-home">游 Inicio</button>
</div>

<h1>{{title}}</h1>

<!-- 游댳 Formulario de filtros -->
<form id="filterForm" method="GET" action="/products" class="filter-form">
  <label for="query">Categor칤a:</label>
  <select name="query" id="query">
    <option value="">--Todas--</option>
    <option value="Ropa" {{#if (eq query "Ropa")}}selected{{/if}}>Ropa</option>
    <option value="Calzado" {{#if (eq query "Calzado")}}selected{{/if}}>Calzado</option>
    <option value="Accesorios" {{#if (eq query "Accesorios")}}selected{{/if}}>Accesorios</option>
  </select>

  <label for="status">Disponibilidad:</label>
  <select name="status" id="status">
    <option value="">--Todos--</option>
    <option value="true" {{#if (eq status "true")}}selected{{/if}}>Disponible</option>
    <option value="false" {{#if (eq status "false")}}selected{{/if}}>No disponible</option>
  </select>

  <label for="sort">Ordenar por precio:</label>
  <select name="sort" id="sort">
    <option value="">--Sin orden--</option>
    <option value="asc" {{#if (eq sort "asc")}}selected{{/if}}>Ascendente</option>
    <option value="desc" {{#if (eq sort "desc")}}selected{{/if}}>Descendente</option>
  </select>

  <button type="submit">Aplicar</button>
</form>

<!-- 游댳 Selector de Carrito -->
<div class="cart-selector">
  <label for="cartSelect"><strong>Selecciona un carrito:</strong></label>
  <select id="cartSelect">
    <option value="">-- Selecciona un carrito --</option>
    {{#each carts}}
      <option value="{{this._id}}">Carrito #{{this._id}}</option>
    {{/each}}
  </select>

  <button id="viewCartBtn">Ver carrito</button>
</div>

<!-- 游댳 Lista de productos -->
<ul id="productsList">
  {{#each products}}
    <li>
      <div class="product-info">
        <a href="/products/{{this._id}}">
          <h2>{{this.title}}</h2>
        </a>
        <p><strong>Precio:</strong> ${{this.price}}</p>
        <p>{{this.description}}</p>

        {{#if this.thumbnails}}
          <div class="product-images">
            {{#each this.thumbnails}}
              <img src="/{{this}}" alt="Imagen de {{../title}}">
            {{/each}}
          </div>
        {{/if}}
      </div>

      <button class="addToCart addToCartBtn" data-productid="{{this._id}}">
        游 Agregar al carrito
      </button>
    </li>
  {{/each}}
</ul>

<!-- 游댳 Navegaci칩n de p치ginas -->
<div class="pagination">
  {{#if prevLink}}
    <a href="{{prevLink}}" class="page-btn">拘勇 Anterior</a>
  {{/if}}

  <span>P치gina {{page}} de {{totalPages}}</span>

  {{#if nextLink}}
    <a href="{{nextLink}}" class="page-btn">Siguiente 俱뫮잺</a>
  {{/if}}
</div>
